<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width">
	<base href="/">
	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
	<!-- build:css(.) styles/vendor.css -->
	<!-- bower:css -->
	<!-- endbower -->
	<!-- endbuild -->
	<!-- build:css(.tmp) styles/main.css -->
	<link rel="stylesheet" href="styles/bootstrap.css">
	<link rel="stylesheet" href="styles/main.css">
	<!-- endbuild -->
</head>
<body ng-app="webPlayerApp">
	<script>
		dataLayer = [{
			'pageCategory': 'DomLoaded',
			'visitorType': 'high-value'
		}];
	</script>
	<!-- Google Tag Manager -->
	<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-N8PRR2"
					  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-TWB2RP');</script>
	<!-- End Google Tag Manager -->

	<!--[if lte IE 8]>
	<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
		your browser</a> to improve your experience.</p>
	<![endif]-->

	<!-- Add your site or application content here -->

	<div class="container" ui-view>
	</div>

	<!-- build:js(.) scripts/vendor.js -->
	<!-- bower:js -->
	<script src="bower_components/angular/angular.js"></script>
	<script src="bower_components/angular-animate/angular-animate.js"></script>
	<script src="bower_components/angular-cookies/angular-cookies.js"></script>
	<script src="bower_components/angular-messages/angular-messages.js"></script>
	<script src="bower_components/angular-resource/angular-resource.js"></script>
	<script src="bower_components/angular-route/angular-route.js"></script>
	<script src="bower_components/angular-sanitize/angular-sanitize.js"></script>
	<script src="bower_components/angular-touch/angular-touch.js"></script>
	<script src="bower_components/angular-ui-router/release/angular-ui-router.js"></script>
	<script src="bower_components/underscore/underscore.js"></script>
	<script src="bower_components/angular-underscore-module/angular-underscore-module.js"></script>
	<script src="bower_components/re-tree/re-tree.js"></script>
	<script src="bower_components/ng-device-detector/ng-device-detector.js"></script>
	<!-- endbower -->
	<!-- endbuild -->

	<!-- build:js({.tmp,app}) scripts/scripts.js -->
	<script src="scripts/app.js"></script>
	<script src="scripts/controllers/unbundled.js"></script>

	<script src="scripts/controllers/home.js"></script>
	<script src="scripts/controllers/root.js"></script>
	<script src="scripts/controllers/auth/welcome.js"></script>
	<script src="scripts/controllers/auth/providers.js"></script>
	<script src="scripts/controllers/auth/verify.js"></script>
	<script src="scripts/controllers/auth/login.js"></script>
	<script src="scripts/controllers/player/player.js"></script>


	<script src="scripts/services/providers.js"></script>
	<script src="scripts/services/countries.js"></script>
	<script src="scripts/directives/loader.js"></script>
	<script src="scripts/directives/modal.js"></script>
	<script src="scripts/directives/controllers/modal.js"></script>
	<script src="scripts/directives/player/playerHTML5.js"></script>
	<script src="scripts/directives/player/playerSilverlight.js"></script>
	<script src="scripts/directives/player/playerThird.js"></script>

	<!-- endbuild -->


	<script type="text/javascript">


		//		var defaultVstbServer = 'http://54.191.76.80/vstb/app';
		//		var defaultCarrierId = '1';
		var defaultVstbServer = 'http://m.onthego.telus.com/vstb/app';
		var defaultCarrierId = '4';
		var defaultApplicationId = 5004;

		function onSilverlightError(sender, args) {

			var appSource = "";
			if (sender != null && sender != 0) {
				appSource = sender.getHost().Source;
			}

			var errorType = args.ErrorType;
			var iErrorCode = args.ErrorCode;

			if (errorType == "ImageError" || errorType == "MediaError") {
				return;
			}

			var errMsg = "Unhandled Error in Silverlight Application " + appSource + "\n";

			errMsg += "Code: " + iErrorCode + "    \n";
			errMsg += "Category: " + errorType + "       \n";
			errMsg += "Message: " + args.ErrorMessage + "     \n";

			if (errorType == "ParserError") {
				errMsg += "File: " + args.xamlFile + "     \n";
				errMsg += "Line: " + args.lineNumber + "     \n";
				errMsg += "Position: " + args.charPosition + "     \n";
			}
			else if (errorType == "RuntimeError") {
				if (args.lineNumber != 0) {
					errMsg += "Line: " + args.lineNumber + "     \n";
					errMsg += "Position: " + args.charPosition + "     \n";
				}
				errMsg += "MethodName: " + args.methodName + "     \n";
			}

			throw new Error(errMsg);
		}

		var slRootCtrl;

		function pluginLoaded(sender, args) {
			console.log('plugin loaded');
			slRootCtrl = sender.getHost();

			document.getElementById('spnDeviceId').textContent = slRootCtrl.Content.SLPlayer.GetDeviceId();

			txtVstbUrl.value = defaultVstbServer;
			txtCarrierId.value = defaultCarrierId;
			txtAppId.value = defaultApplicationId;
		}


		function test() {

			alert(slRootCtrl.Content.SLPlayer.GetDeviceId());
		}

		function changeLang(lang) {
			slRootCtrl.Content.SLPlayer.ChangeLanguage(lang);
		}

		function showContentTable() {

			document.getElementById('tblContent').className = '';
			document.getElementById('tblUrl').className = 'hidden';
			document.getElementById('tblEnv').className = 'hidden';
		}

		function showPlainUrlTable() {
			document.getElementById('tblUrl').className = '';
			document.getElementById('tblContent').className = 'hidden';
			document.getElementById('tblEnv').className = 'hidden';
		}

		function showEnvTable() {
			document.getElementById('tblUrl').className = 'hidden';
			document.getElementById('tblContent').className = 'hidden';
			document.getElementById('tblEnv').className = '';
		}

		function playUrl(url) {

			slRootCtrl.Content.SLPlayer.PlayUrl(url);

		}

		function playContentId() {

			slRootCtrl.Content.SLPlayer.PlayContent(txtContentId.value, document.getElementById('txtUat').value, "omg@quickplay.com", "3", "1.0.0.1", "category/path", "123", "dummyCategoryName", "sample-account-id");

		}

		function setupEnvironment() {

			slRootCtrl.Content.SLPlayer.SetupServer(txtVstbUrl.value, txtAppId.value, txtCarrierId.value);
			alert('Done!');

			txtVstbUrl.readOnly = true;
			txtAppId.readOnly = true;
			txtCarrierId.readOnly = true;
		}

		function play() {

			slRootCtrl.Content.SLPlayer.playBtn_Click(null, null);
			alert('Done!');

			txtVstbUrl.readOnly = true;
			txtAppId.readOnly = true;
			txtCarrierId.readOnly = true;
		}

	</script>
	</body>
</html>
